SELECT
	COLUMN_1,
	집계함수(COLUMN_2)
FROM
	TABLE_NAME
GROUP BY
	COLUMN_1
HAVING
	조건식
;

-- HAVING 절은 GROUP BY절에 의해 생성된 그룹행의 조건을 설정
-- 반면에 WHERE절은 GROUP BY절이 적용되기 전에 개별 행의 조건을 설정

SELECT
	CUSTOMER_ID,
	SUM(AMOUNT) AS AMOUNT
FROM
	PAYMENT
GROUP BY
	CUSTOMER_ID
;

SELECT
	customer_id,
	sum(amount) AS amount
FROM
	PAYMENT
GROUP BY
	customer_id
HAVING
	sum(amount) > 200
;

-- PAYMENT TABLE 조회
-- CUSTOMER_ID 기준으로 GROUP BY
-- GROUP BY 결과값 중 SUM(AMOUNT)가 200 초과하는 행 출력

SELECT
	STORE_ID,
	COUNT(CUSTOMER_ID) AS COUNT
FROM
	CUSTOMER
GROUP BY
	STORE_ID
;

SELECT
	STORE_ID,
	COUNT(CUSTOMER_ID) AS COUNT
FROM
	CUSTOMER
GROUP BY
	STORE_ID
HAVING
	COUNT(CUSTOMER_ID) > 300
;

-- CUSTOMER TABLE 조회
-- STORE_ID 기준으로 GROUP BY
-- GROUP BY 결과값 중 COUNT(CUSTOMER_ID)의 결과가 300 초과하는 집합 리턴